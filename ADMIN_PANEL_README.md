# Docent AMR - Admin Control Panel

**Access URL:** https://docentbot.aiedus.org

---

## ðŸŽ¯ OVERVIEW

The Admin Control Panel is a comprehensive web-based interface for testing, controlling, and monitoring the Docent AMR (Autonomous Mobile Robot). It provides real-time visualization, manual controls, automated tour management, and system monitoring.

---

## ðŸ“‹ FEATURES

### 1. **Map View Menu** ðŸ—ºï¸
**Real-time visualization of AMR position and booth locations**

- **Live Map Display**
  - Grid-based coordinate system OR actual SLAM-generated map
  - Robot position marker with heading indicator
  - Booth markers color-coded by type (red = exhibition, green = charging)
  - Updates every second

- **Download SLAM Map Button** ðŸ“¥
  - Fetches the actual map generated by the AMR's SLAM navigation system
  - Displays real floor plan with obstacles and walls
  - Automatically converts world coordinates to map coordinates
  - Shows robot and booth positions on actual map

- **Current Position Display**
  - X, Y coordinates in meters
  - Heading in degrees
  - Current speed in m/s

- **Interactive Booth Markers**
  - Click to select booth
  - View detailed position information
  - Navigate to selected booth
  - Update booth position to current robot location

---

### 2. **Schedule Menu** ðŸ“‹
**Build and manage exhibition tour schedules**

- **Available Booths List**
  - Shows all calibrated booth positions
  - Displays booth type and coordinates
  - Click to add to tour schedule

- **Tour Schedule Builder**
  - Drag-free reordering with â†‘/â†“ buttons
  - Visual numbering shows tour order
  - Remove individual booths with âœ• button
  - Clear entire schedule at once

- **Booth Details Panel**
  - Name, type, and exact position
  - Navigate to booth button
  - Update position from current location

**How to Build a Tour:**
1. Click booths from "Available Booths" to add them
2. Use â†‘/â†“ buttons to reorder stops
3. Remove unwanted stops with âœ•
4. Switch to "Auto Tour" menu to execute

---

### 3. **Jog Control Menu** ðŸŽ®
**Manual robot control with precision movements**

#### Movement Controls
- **Forward (â†‘)** - Move forward by specified distance
- **Backward (â†“)** - Move backward by specified distance
- **Turn Left (â†¶)** - Rotate left by specified angle
- **Turn Right (â†·)** - Rotate right by specified angle

#### Movement Settings
- **Distance:** 1-100 cm (default: 10cm)
- **Speed:** 0.1-1.0 m/s (default: 0.3 m/s)
- **Turn Angle:** 1-360Â° (default: 90Â°)
- **Turn Speed:** 0.1-1.5 rad/s (default: 0.6 rad/s)

#### Sound Controls
- **Pre-programmed Announcements:**
  - ðŸ”Š Welcome - Tour greeting
  - ðŸ”Š Booth A - Ancient Artifacts explanation
  - ðŸ”Š Booth B - Modern Art Gallery explanation
  - ðŸ”Š Booth C - Technology Innovation explanation
  - ðŸ”Š Goodbye - Tour farewell
  - â¹ï¸ Stop - Cancel current announcement

**Uses Web Speech API for text-to-speech**

#### Emergency Controls
- **ðŸ›‘ EMERGENCY STOP** - Immediately halt all movement

**Keyboard Shortcuts:**
- Arrow Keys / WASD for movement
- Space bar for emergency stop

---

### 4. **Auto Tour Menu** ðŸŽ¯
**Automated execution of scheduled tours**

#### Tour Control
- **â–¶ï¸ Start Tour** - Begin automated tour sequence
- **â¸ï¸ Pause** - Temporarily suspend tour
- **â¹ï¸ Stop** - End tour and return to idle

#### Tour Status Display
- Current status (Not Started / Running / Paused)
- Progress indicator (current/total booths)
- Visual progress bar
- Current destination and distance remaining

#### Activity Log
- Real-time log of tour events
- Navigation status updates
- Arrival confirmations
- Error messages

**Automated Tour Process:**
1. Navigate to each booth in sequence
2. Wait for arrival confirmation
3. Play booth announcement
4. Pause for 10 seconds
5. Proceed to next booth
6. Complete when all booths visited

---

### 5. **Status Menu** ðŸ“Š
**Real-time system monitoring and diagnostics**

#### System Status
- Navigation software version
- Robot hostname
- Battery level (percentage)
- Charge status
- Emergency button state
- Current active map

#### Navigation Status
- Current state (Idle / Navigating / Complete)
- Active goal/destination
- Distance remaining to goal
- Total mileage traveled

#### System Log
- Timestamped activity log
- Color-coded messages (green=success, red=error, blue=info)
- Auto-scrolling with 50-message history

---

### 6. **Settings Menu** âš™ï¸
**Configuration and booth management**

#### Connection Settings
- AMR IP Address configuration
- Connection status monitoring

#### Booth Management
- **Add New Booth:**
  - Enter booth name
  - Select type (Exhibition / Route Point / Charging)
  - Saves current robot position as booth location

#### Navigation Settings
- Set maximum navigation speed (0.3-1.0 m/s)

---

## ðŸ”§ TECHNICAL DETAILS

### System Architecture
```
Web Browser (Admin Panel)
    â†“ HTTPS
Nginx Server (Port 443)
    â†“ Proxy to localhost:5020
Flask Proxy Server
    â†“ HTTP API
AMR Navigation System (192.168.0.5)
```

### Files
- **Frontend:** `/var/www/docent/admin.html`
- **Controller:** `/var/www/docent/admin-controller.js`
- **Proxy Server:** `/var/www/docent/proxy_server.py`
- **Nginx Config:** `/etc/nginx/sites-available/docentbot.aiedus.org`

### API Endpoints Used
- `/reeman/pose` - Current position
- `/reeman/position` - Booth waypoints
- `/reeman/nav_status` - Navigation state
- `/reeman/base_encode` - Battery & emergency stop
- `/reeman/map` - Download SLAM-generated map (PNG + metadata)
- `/cmd/nav_name` - Navigate to booth
- `/cmd/move` - Jog movement
- `/cmd/turn` - Jog rotation
- `/cmd/speed` - Emergency stop
- `/cmd/position` - Add/update booth
- `/cmd/max_speed` - Set max speed

---

## ðŸŽ¨ USER INTERFACE

### Color Scheme
- **Background:** Dark gradient (sophisticated tech aesthetic)
- **Primary Blue:** #3498db (buttons, headings)
- **Success Green:** #2ecc71 (confirmations)
- **Warning Orange:** #f39c12 (cautions)
- **Danger Red:** #e74c3c (errors, emergency)

### Status Indicators
- **Connection:** ðŸŸ¢ Green = Online | ðŸ”´ Red = Offline
- **Booth Markers:** Red = Exhibition | Green = Charging
- **Robot Marker:** Blue circle with white heading indicator

---

## ðŸ“± RESPONSIVE DESIGN

- Desktop-optimized layout (1920x1080 recommended)
- Sidebar navigation for easy menu switching
- Scrollable content areas
- Grid-based layouts adapt to screen size

---

## ðŸš€ QUICK START GUIDE

### First Time Setup

1. **Access the Admin Panel**
   ```
   https://docentbot.aiedus.org
   ```

2. **Check Connection**
   - Look for green "Connected" indicator in header
   - Battery level should display
   - If red "Disconnected", check AMR power and network

3. **Calibrate Booths**
   - Use Jog Controls to move robot to booth location
   - Go to Settings menu
   - Enter booth name (e.g., "booth_A")
   - Select booth type
   - Click "Add Booth at Current Position"

4. **Build Tour Schedule**
   - Go to Schedule menu
   - Click booths to add to schedule
   - Reorder with â†‘/â†“ buttons
   - Verify order is correct

5. **Test Tour**
   - Go to Auto Tour menu
   - Click "â–¶ï¸ Start Tour"
   - Monitor progress and logs
   - Use "â¸ï¸ Pause" or "â¹ï¸ Stop" as needed

---

## ðŸ” TROUBLESHOOTING

### Problem: "Disconnected" Status

**Check:**
1. Is AMR powered on?
2. Is 192.168.0.5 reachable? (`ping 192.168.0.5`)
3. Is proxy server running? (`ps aux | grep proxy_server`)
4. Check proxy logs: `tail -f /tmp/amr-proxy.log`

**Solution:**
```bash
# Restart proxy server
pkill -f proxy_server.py
cd /var/www/docent
nohup python3 proxy_server.py > /tmp/amr-proxy.log 2>&1 &
```

### Problem: Robot Not Moving

**Check:**
1. Emergency button status in header
2. If "PRESSED", release physical emergency stop button
3. Check battery level (should be > 20%)
4. Verify mode is "Navigation" (not "Mapping")

### Problem: Map Not Showing Robot

**Check:**
1. Are position values updating? (look at X, Y, Î¸ display)
2. Is robot within map bounds? (Â±10 meters)
3. Refresh page and wait 2-3 seconds for position update

### Problem: Tour Fails to Start

**Check:**
1. Is schedule empty? Add booths first
2. Are booth names valid? Check spelling
3. Is another navigation active? Stop current navigation first
4. Check Activity Log for error messages

---

## ðŸ’¡ BEST PRACTICES

### For Testing
1. Always test jog controls before running automated tour
2. Start with small distances (10cm) when testing
3. Use emergency stop if robot behaves unexpectedly
4. Monitor battery level - charge above 30%

### For Tour Setup
1. Calibrate booths from same reference point
2. Test navigation to each booth individually first
3. Order booths logically (minimize backtracking)
4. Allow 2-3 minutes per booth stop

### For Demonstrations
1. Pre-test full tour before live demo
2. Charge robot to 100%
3. Clear obstacles from navigation paths
4. Have emergency stop easily accessible
5. Monitor Activity Log during tour

---

## ðŸŽ¯ EXPERT FEATURES (As AMR Specialist)

### Advanced Movement Control
The jog interface supports precise positioning for:
- **Booth Calibration** - Save exact positions
- **Obstacle Avoidance Testing** - Manual override
- **Fine-Tuning** - Adjust final approach angles

### Tour Optimization
- **Path Planning** - Reorder stops to minimize travel
- **Timing Control** - Adjust pause duration per booth
- **Battery Management** - Return to charge mid-tour if needed

### Monitoring & Diagnostics
- **Real-time Position Tracking** - Sub-centimeter accuracy
- **Speed Monitoring** - Verify movement performance
- **Navigation Analysis** - Track distance and mileage

### System Customization
- **Speed Profiles** - Adjust for different environments
- **Announcement Timing** - Modify pause durations
- **Safety Parameters** - Set conservative limits for demos

---

## ðŸ“ž SUPPORT

For technical issues or questions:
- **Documentation:** `/var/www/docent/docent_plan.md`
- **API Reference:** `/var/www/docent/AMR_API_ANALYSIS_REPORT.md`
- **Logs:** `/tmp/amr-proxy.log`
- **Nginx Logs:** `/var/log/nginx/docentbot.aiedus.org-*.log`

---

**Version:** 1.0
**Last Updated:** November 30, 2025
**Platform:** Reeman SLAM Navigation System v5.1.11_06
